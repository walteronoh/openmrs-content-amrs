{
    "name": "POC Inpatient Discharge Form v1.0",
    "uuid": "xxxx",
    "version": "1.0",
    "description": "Form for inpatient discharge",
    "published": true,
    "retired": false,
    "encounterType": "181820aa-88c9-479b-9077-af92f5364329",
    "encounter": "DISCHARGE",
    "processor": "EncounterFormProcessor",
    "pages": [
      {
        "label": "Encounter Details",
        "sections": [
          {
            "label": "Encounter Details",
            "isExpanded": "true",
            "questions": [
              {
                "label": "Visit date:",
                "type": "encounterDatetime",
                "required": "true",
                "default": "",
                "id": "encDate",
                "questionOptions": {
                  "rendering": "date"
                },
                "validators": [
                  {
                    "type": "date"
                  }
                ]
              },
              {
                "type": "encounterProvider",
                "label": "Provider:",
                "id": "provider",
                "required": "true",
                "default": "",
                "questionOptions": {
                  "rendering": "ui-select-extended"
                }
              },
              {
                "type": "encounterLocation",
                "label": "Facility name (site/satellite clinic required):",
                "id": "location",
                "required": "true",
                "questionOptions": {
                  "rendering": "ui-select-extended"
                }
              }
            ]
          }
        ]
      },
       {
      "label": "Patient Outcome",
      "sections": [
        {
          "label": "Discharge Details",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Final diagnosis:",
              "id": "FinAlDiagnosis",
              "type": "diagnosis",
              "questionOptions": {
                "rendering": "remote-select",
                "rank": 1,
                "datasource": {
                  "name": "diagnoses",
                  "config": {
                    "conceptSourceUuid": "43aaca5f-d623-43fd-993b-673b5d927cdd"
                  }
                }
              }
            },
            {
              "label": "Discharge date:",
              "type": "obs",
              "id": "dischargeDate",
              "questionOptions": {
                "concept": "a8a01710-1350-11df-a1f1-0026b9348838",
                "rendering": "date"
              },
              "validators": [
                {
                  "type": "date",
                  "allowFutureDates": "false"
                },
                {
                  "type": "js_expression",
                  "failsWhenExpression": "(new moment(encDate)).isAfter((new moment(myValue)), 'day')",
                  "message": "Discharge date should not be before the encounter date."
                }
              ]
            }
          ]
        },
        {
          "label": "Clinical summary",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Discharge instructions/remarks:",
              "type": "obs",
              "required": false,
              "id": "dischargeInstructions",
              "questionOptions": {
                "rendering": "textarea",
                "concept": "23f710cc-7f9c-4255-9b6b-c3e240215dba",
                "rows": "5"
              },
              "validators": []
            },
            {
              "label": "Clinical notes:",
              "type": "obs",
              "id": "clinicalNotes",
              "questionOptions": {
                "concept": "5e4dc798-2cce-4a1a-97e9-bcf22d64b07c",
                "rendering": "textarea",
                "rows": "10"
              }
            },
            {
              "label": "Discharge status:",
              "type": "obs",
              "required": true,
              "id": "dischargeStatus",
              "questionOptions": {
                "rendering": "select",
                "concept": "678bff8f-694d-42cc-9f70-b10e15daca9f",
                "answers": [
                  {
                    "concept": "cc5128d7-826d-4489-86e3-a3a81b69ec36",
                    "label": "Recovered"
                  },
                  {
                    "concept": "f3dd78da-98db-4346-8c25-e7051806a38f",
                    "label": "Absconded"
                  },
                  {
                    "concept": "d583db12-e5f3-49de-b7e6-7eda0d58b831",
                    "label": "Left against medical advice"
                  },
                  {
                    "concept": "79928a07-ab17-45c2-93ba-f3c106b257b6",
                    "label": "Referred to higher level facility"
                  },
                  {
                    "concept": "9e5ddce7-ba78-47ef-a72f-007f5aa819b2",
                    "label": "Referred to a specialist"
                  },
                  {
                    "concept": "a89335d6-1350-11df-a1f1-0026b9348838",
                    "label": "Deceased"
                  }
                ]
              },
              "validators": []
            },
           {
              "label": "Transfer to mortuary/Funeral home:",
              "type": "obs",
              "required": true,
              "id": "transferToMortuary",
              "questionOptions": {
                "rendering": "select",
                "concept": "7fa691cb-f153-477a-92dc-707d768aa405",
                "conceptMappings": [],
                "answers": [
                  {
                    "concept": "d28e360f-085d-48ae-aa28-aff612cbaa90",
                    "label": "Released to another funeral home"
                  },
                  {
                    "concept": "59312903-dde9-4f7a-b6cf-7b41863b7e81",
                    "label": "Facility funeral home"
                  },
                  {
                    "concept": "3d920c84-8cca-4d46-a6c5-b2af7737ce60",
                    "label": "Body released to the family"
                  }
                ]
              },
              "validators": [],
              "hide": {
                "hideWhenExpression": "isEmpty(dischargeStatus) || dischargeStatus !== 'a89335d6-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Referred to?",
              "type": "obs",
              "id": "referredTo",
              "questionOptions": {
                "concept": "6434322f-d050-4764-8c00-741e20c4c9e1",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "9bc09285-7a04-4c81-a313-3a1c67f5c84a",
                    "label": "Community Unit"
                  },
                  {
                    "concept": "ab396b67-273c-4c97-9f90-f858d79b13b1",
                    "label": "Another Health Facility"
                  }
                ]
              },
              "hide": {
                "hideWhenExpression": "isEmpty(dischargeStatus) || dischargeStatus !== '79928a07-ab17-45c2-93ba-f3c106b257b6'"
              }
            },
            {
              "label": "Name of Facility:",
              "type": "encounterLocation",
              "required": "true",
              "questionOptions": {
                "rendering": "ui-select-extended"
              },
              "id": "OtherFacility",
              "hide": {
                "hideWhenExpression": "isEmpty(referredTo) || referredTo !== 'ab396b67-273c-4c97-9f90-f858d79b13b1'"
              }
            },
            {
              "label": "Follow up appointment",
              "required": false,
              "id": "appointmentWorkspaceLauncher",
              "questionOptions": {
                "rendering": "workspace-launcher",
                "buttonLabel": "Add appointments",
                "workspaceName": "appointments-form-workspace"
              },
              "hide": {
                "hideWhenExpression": "isEmpty(dischargeStatus) || dischargeStatus !=='cc5128d7-826d-4489-86e3-a3a81b69ec36' && dischargeStatus !=='9e5ddce7-ba78-47ef-a72f-007f5aa819b2'"
              }
            },
            {
              "label": "Follow up with (Doctor/Specialist):",
              "type": "obs",
              "required": false,
              "id": "followUpWith",
              "questionOptions": {
                "rendering": "select",
                "concept": "a89d1ed4-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "32619189-1bd9-45fc-ba1c-62ce53ebd367",
                    "label": "Gynaecologist/Obstetric"
                  },
                  {
                    "concept": "ed614306-3a96-4924-be5e-3bd05002408e",
                    "label": "Pediatrician"
                  },
                  {
                    "concept": "33ad52f9-9088-47d1-9469-4762ace5b780",
                    "label": "Surgeon"
                  },
                  {
                    "concept": "a8a06846-1350-11df-a1f1-0026b9348838",
                    "label": "Physiotherapist"
                  },
                  {
                    "concept": "073ea366-834b-49bd-b4db-ce4e6c61bbc3",
                    "label": "Oncologist"
                  },
                  {
                    "concept": "385aa16d-3af8-4fc8-b490-f861bc1da684",
                    "label": "Nutritionist"
                  }
                ]
              },
              "validators": [],
              "hide": {
                "hideWhenExpression": "isEmpty(dischargeStatus) || dischargeStatus !== '9e5ddce7-ba78-47ef-a72f-007f5aa819b2'"
              }
            },
            {
              "label": "Discharging doctor",
              "type": "encounterProvider",
              "required": false,
              "id": "dischargingDoctor",
              "questionOptions": {
                "rendering": "ui-select-extended",
                "concept": "29f94c52-6159-4e26-805c-beb915c9fa21"
              },
              "validators": []
            }
          ]
        }
      ]
    }
    ]
  }