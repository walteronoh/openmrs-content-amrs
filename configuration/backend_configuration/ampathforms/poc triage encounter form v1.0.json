{
  "name": "POC OPD Triage Encounter Form v1.0",
  "uuid": "5a487e04-4494-395f-9d98-509a20baccfd",
  "published": true,
  "retired": false,
  "encounterType": "8a43b09b-2d9f-487c-a1c3-d6bf220671a7",
  "description": "OPD Triage information",
  "version": "1.0",
  "encounter": "OPDTRIAGE",
  "processor": "EncounterFormProcessor",

  "pages": [
    {
      "label": "Triage",
      "sections": [
        {
          "label": "Visit Details",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Date:",
              "type": "encounterDatetime",
              "required": "true",
              "questionOptions": {
                "rendering": "ui-select-extended"
              },
              "id": "encDate",
              "validators": [
                {
                  "type": "date",
                  "allowFutureDates": "false"
                }
              ]
            },
            {
              "label": "Provider:",
              "type": "encounterProvider",
              "required": "true",
              "questionOptions": {
                "rendering": "ui-select-extended"
              },
              "id": "encProvider "
            },
            {
              "label": "Location:",
              "type": "encounterLocation",
              "required": "true",
              "questionOptions": {
                "rendering": "ui-select-extended"
              },
              "id": "encLocation"
            }
          ]
        },
        
        {
          "label": "Physical Assessment",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Patient mobility assessment?",
              "type": "obs",
              "id": "mobilityAdult",
              "questionOptions": {
                "concept": "e64230be-5bf1-4f1e-800d-d2a510e65530",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "47e7d083-eafd-4fb4-b8c6-7f91fbaa0d3f",
                    "label": "Walking"
                  },
                  {
                    "concept": "128c543a-717e-4697-a7d7-a1627586d4b3",
                    "label": "With Help"
                  },
                  {
                    "concept": "cc96cdb5-c62b-4d29-805d-3f48d5a285cb",
                    "label": "Stretcher/Immobile"
                  }
                ]
              },
              "hide": {
                "hideWhenExpression": "age < 12"
              }
            },
            {
              "label": "Patient mobility assessment?",
              "type": "obs",
              "id": "mobilityChild",
              "questionOptions": {
                "concept": "e64230be-5bf1-4f1e-800d-d2a510e65530",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "a899e7b4-1350-11df-a1f1-0026b9348838",
                    "label": "Normal for age"
                  },
                  {
                    "concept": "128c543a-717e-4697-a7d7-a1627586d4b3",
                    "label": "Unable to walk as normal"
                  }
                ]
              },
              "hide": {
                "hideWhenExpression": "age > 12"
              }
            },
            {
              "label": "Any injury to the patient within the past 48 hours?",
              "type": "obs",
              "id": "traumaInjury",
              "questionOptions": {
                "concept": "ab427eb7-af74-44bc-b358-0fc783abc711",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ]
              }
            },
            {
              "label": "Patient level of consciousness(AVPU):",
              "type": "obs",
              "id": "avpuLevel",
              "questionOptions": {
                "concept": "48921243-38b9-4569-b52b-321a26aac763",
                "rendering": "multiCheckbox",
                "answers": [
                  {
                    "concept": "04f9358a-226d-4fe1-9cd7-d47eabab15db",
                    "label": "Alert"
                  },
                  {
                    "concept": "7ca3ba0c-7c11-418e-b7e0-4200c96107be",
                    "label": "Reacts to Voice"
                  },
                  {
                    "concept": "9c057035-7d44-4a40-9f47-ac3798a13a96",
                    "label": "Reacts to Pain"
                  },
                  {
                    "concept": "485a3b99-5cfa-43f6-9f3a-b1eb384385ee",
                    "label": "Unresponsive"
                  }
                ]
              }
            }
          ]
        },
        {
          "label": "Vital Signs",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Temperature (C):",
              "type": "obs",
              "id": "temperature",
              "questionOptions": {
                "concept": "a8a65fee-1350-11df-a1f1-0026b9348838",
                "rendering": "number",
                "max": "43",
                "min": "25"
              },
              "alert": {
                "alertWhenExpression": "myValue && (myValue >= 37.5 || myValue < 35)",
                "message": "Temperature is out of range (Normal range 35-37)"
              }
            },
            {
              "label": "Mode of collection?",
              "type": "obs",
              "id": "tempMode",
              "questionOptions": {
                "concept": "7d14cdba-ef6e-4a39-a9bd-951f177e0617",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "a8a67a60-1350-11df-a1f1-0026b9348838",
                    "label": "Axiliary"
                  },
                  {
                    "concept": "a16d5b0d-6ffd-43e5-b47e-019f244054d3",
                    "label": "Forehead thermometer gun"
                  },
                  {
                    "concept": "db0c5937-3874-4eae-9566-9a645ad7ac65",
                    "label": "Oral"
                  }
                ]
              },
              "hide": {
                "hideWhenExpression": "isEmpty(temperature)"
              }
            },
            {
              "label": "Pulse rate:",
              "type": "obs",
              "id": "pulseRate",
              "questionOptions": {
                "concept": "a8a65f12-1350-11df-a1f1-0026b9348838",
                "rendering": "number",
                "max": "230",
                "min": "0"
              },
              "alert": {
                "alertWhenExpression": "myValue && (myValue >= 100.5 || myValue < 59.5)",
                "message": "Pulse Rate is out of range (Normal range 60-100)"
              }
            },
            {
              "label": "Systolic B.P:",
              "type": "obs",
              "id": "sysBP",
              "questionOptions": {
                "concept": "a8a65d5a-1350-11df-a1f1-0026b9348838",
                "rendering": "number"
              },
              "alert": {
                "alertWhenExpression": "myValue && (myValue >= 130.5 || myValue < 119.5)",
                "message": "Systolic is out of range (Normal range 120-130)"
              }
            },
            {
              "label": "Diastolic B.P:",
              "type": "obs",
              "id": "diasBP",
              "questionOptions": {
                "concept": "a8a65e36-1350-11df-a1f1-0026b9348838",
                "rendering": "number"
              },
              "alert": {
                "alertWhenExpression": "myValue && (myValue >= 85.5 || myValue < 79.5)",
                "message": "Diastolic is out of range (Normal range 80-85)"
              }
            },
            {
              "label": "Respiratory rate:",
              "type": "obs",
              "id": "respRate",
              "questionOptions": {
                "concept": "a8a6f71a-1350-11df-a1f1-0026b9348838",
                "rendering": "number"
              },
              "alert": {
                "alertWhenExpression": "myValue && (myValue >= 16.5 || myValue < 11.5)",
                "message": "Respiratory Rate is out of range (Normal range 12-16)"
              }
            },
            {
              "label": "Oxygen saturation:",
              "type": "obs",
              "id": "oxygenSat",
              "questionOptions": {
                "concept": "a8a66354-1350-11df-a1f1-0026b9348838",
                "rendering": "number"
              },
              "alert": {
                "alertWhenExpression": "myValue && (myValue >= 100.5 || myValue < 94.5)",
                "message": "Oxygen Saturation is out of range (Normal range 95-100)"
              }
            },
            {
              "label": "Mode of collection?",
              "type": "obs",
              "id": "satMode",
              "questionOptions": {
                "concept": "cdfbd2c2-9034-4795-9968-a98fb9b0e86e",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "40f55914-ce71-40f4-b636-190efb9733b8",
                    "label": "Room air"
                  },
                  {
                    "concept": "5fd6a143-9a00-4200-a40c-eaafa4555cf3",
                    "label": "On supplemental oxygen"
                  }
                ]
              },
              "hide": {
                "hideWhenExpression": "isEmpty(oxygenSat)"
              }
            }
          ]
        },
        {
          "label": "Other Recordings",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Weight(kg):",
              "type": "obs",
              "id": "weight",
              "required": "true",
              "questionOptions": {
                "concept": "a8a660ca-1350-11df-a1f1-0026b9348838",
                "rendering": "number",
                "max": "250",
                "min": "0"
              },
              "hide": {
                "hideWhenExpression": "!(age >= 0 && age <=5)"
              }
            },
            {
              "label": "Weight(kg):",
              "type": "obs",
              "id": "weightForBMI",
              "required": "true",
              "questionOptions": {
                "concept": "a8a660ca-1350-11df-a1f1-0026b9348838",
                "rendering": "number",
                "max": "250",
                "min": "0"
              },
              "hide": {
                "hideWhenExpression": "age <= 5"
              }
            },
            {
              "label": "Height(cm):",
              "type": "obs",
              "required": "true",
              "id": "height",
              "questionOptions": {
                "concept": "a8a6619c-1350-11df-a1f1-0026b9348838",
                "rendering": "number",
                "max": "272",
                "min": "10"
              },
              "historicalExpression": "HD.getObject('prevEnc').getValue('a8a6619c-1350-11df-a1f1-0026b9348838')",
              "hide": {
                "hideWhenExpression": "!(age >= 0 && age <=5)"
              }
            },
            {
              "label": "Height(cm):",
              "type": "obs",
              "required": "true",
              "id": "heightForBMI",
              "questionOptions": {
                "concept": "a8a6619c-1350-11df-a1f1-0026b9348838",
                "rendering": "number",
                "max": "272",
                "min": "10"
              },
              "historicalExpression": "HD.getObject('prevEnc').getValue('a8a6619c-1350-11df-a1f1-0026b9348838')",
              "hide": {
                "hideWhenExpression": "age <= 5"
              }
            },
            {
              "label": "BMI: (Kg/m2)",
              "type": "obs",
              "id": "bmi",
              "questionOptions": {
                "rendering": "number",
                "concept": "a89c60c0-1350-11df-a1f1-0026b9348838",
                "max": "100",
                "min": "0",
                "calculate": {
                  "calculateExpression": "calcBMI(heightForBMI,weightForBMI)"
                }
              },
              "hide": {
                "hideWhenExpression": "age <= 5"
              }
            },

            {
              "label": "MUAC:",
              "type": "obs",
              "id": "muac",
              "questionOptions": {
                "concept": "a89c6188-1350-11df-a1f1-0026b9348838",
                "rendering": "number",
                "max": "250",
                "min": "0"
              },
              "hide": {
                "hideWhenExpression": "(age > 5 && sex !== 'F') || (sex === 'F' &&  age > 49)"
              }
            },
            {
              "label": " Weight for height Z-score:",
              "id": "WeightheightScore",
              "questionOptions": {
                "rendering": "number",
                "concept": "5099d8a8-36c1-4574-a568-9bc49c15c08c",
                "max": "4",
                "min": "-4",
                "calculate": {
                  "calculateExpression": "calcWeightForHeightZscore(weightForHeightRef,height,weight)"
                }
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "age>5"
              }
            },
            {
              "label": "Weight for height Z score diagnosis:",
              "type": "obs",
              "questionOptions": {
                "rendering": "select",
                "concept": "9cf8b8c5-a9fb-4662-9585-97dfbfd9d245",
                "calculate": {
                  "calculateExpression": " weight && height && parseInt(WeightheightScore) >=0 && parseInt(WeightheightScore) <= 4? 'a899e7b4-1350-11df-a1f1-0026b9348838' :weight && height && parseInt(WeightheightScore) === -1 ? '492da2d3-5137-4261-ba07-f961e8c27efb' :weight && height && parseInt(WeightheightScore) === -2 ? 'f0dd06d5-6174-447f-9a9c-f8635b4a6a6d' :weight && height && parseInt(WeightheightScore) === -3 || parseInt(WeightheightScore) === -4 ? '0306539c-f24f-49f5-b059-b646adbec47c' :''"
                },
                "answers": [
                  {
                    "concept": "a899e7b4-1350-11df-a1f1-0026b9348838",
                    "label": "Normal"
                  },
                  {
                    "concept": "492da2d3-5137-4261-ba07-f961e8c27efb",
                    "label": "Mild acute malnutrition"
                  },
                  {
                    "concept": "f0dd06d5-6174-447f-9a9c-f8635b4a6a6d",
                    "label": "Moderate acute malnutrition"
                  },
                  {
                    "concept": "0306539c-f24f-49f5-b059-b646adbec47c",
                    "label": "Severe acute malnutrition"
                  }
                ]
              },
              "id": "weightHeightDiagnosis",
              "validators": [],
              "hide": {
                "hideWhenExpression": "age>5 || isEmpty(WeightheightScore)"
              }
            },

            {
              "label": "BMI for age (+18) categorization:",
              "type": "obs",
              "questionOptions": {
                "rendering": "select",
                "concept": "ac5f7974-3a71-4867-af59-0c30d68ce9d8",
                "calculate": {
                  "calculateExpression": "bmi && (bmi > 30 ? '2a60e784-1314-4454-91ba-7ea4cc2c3b15' : bmi > 25 ? '1505faef-c8aa-422c-b356-da065b88ec9c' : bmi > 18.5 ? 'a899e7b4-1350-11df-a1f1-0026b9348838' : bmi > 16 ? 'f0dd06d5-6174-447f-9a9c-f8635b4a6a6d' : '0306539c-f24f-49f5-b059-b646adbec47c')"
                },
                "answers": [
                  {
                    "concept": "a899e7b4-1350-11df-a1f1-0026b9348838",
                    "label": "Normal"
                  },
                  {
                    "concept": "492da2d3-5137-4261-ba07-f961e8c27efb",
                    "label": "Mild acute malnutrition"
                  },
                  {
                    "concept": "f0dd06d5-6174-447f-9a9c-f8635b4a6a6d",
                    "label": "Moderate acute malnutrition"
                  },
                  {
                    "concept": "0306539c-f24f-49f5-b059-b646adbec47c",
                    "label": "Severe acute malnutrition"
                  },
                  {
                    "concept": "1505faef-c8aa-422c-b356-da065b88ec9c",
                    "label": "Overweight"
                  },
                  {
                    "concept": "2a60e784-1314-4454-91ba-7ea4cc2c3b15",
                    "label": "Obesity"
                  }
                ]
              },
              "id": "bmiCategorization",
              "validators": [],
              "hide": {
                "hideWhenExpression": "age<18 || isEmpty(bmi)"
              }
            },
            {
              "label": "LMP:",
              "type": "obs",
              "id": "lmpDate",
              "questionOptions": {
                "concept": "a89ff758-1350-11df-a1f1-0026b9348838",
                "rendering": "date"
              },
              "validators": [
                {
                  "type": "date",
                  "allowFutureDates": "false"
                }
              ],
              "hide": {
                "hideWhenExpression": "sex !== 'F'  ||  sex ==='F' && (age < 10 || age > 49)"
              }
            },
            {
              "label": "Client vaccinated against HPV?",
              "type": "obs",
              "questionOptions": {
                "rendering": "select",
                "concept": "9806572c-0225-4b17-b21b-a0f44f9d07f0",

                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ]
              },
              "id": "clientHpvVaccinated",
              "validators": [],
              "hide": {
                "hideWhenExpression": "sex !== 'F' || sex === 'F' && (age < 10 || age > 15)"
              }
            },
            {
              "label": "Number of doses given:",
              "type": "obs",
              "id": "doseGivem",
              "questionOptions": {
                "concept": "a89ef54c-1350-11df-a1f1-0026b9348838",
                "rendering": "number",
                "max": "10",
                "min": "0"
              },
              "hide": {
                "hideWhenExpression": "clientHpvVaccinated !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Date given:",
              "type": "obs",
              "id": "vaccineDate",
              "questionOptions": {
                "concept": "0a35a6e4-eb93-448e-a3b0-cae66a57beb4",
                "rendering": "date"
              },
              "hide": {
                "hideWhenExpression": "clientHpvVaccinated !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              },
              "validators": [
                {
                  "type": "date",
                  "allowFutureDates": "false"
                }
              ]
            }
          ]
        },
        {
          "label": "Triage Notes",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Triage notes:",
              "type": "obs",
              "questionOptions": {
                "rendering": "textarea",
                "concept": "23f710cc-7f9c-4255-9b6b-c3e240215dba",
                "rows": "5"
              },
              "id": "triageNotes"
            }
          ]
        }
      ]
    }
  ]
}
